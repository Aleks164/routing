import _asyncToGenerator from"@babel/runtime/helpers/asyncToGenerator";import _regeneratorRuntime from"@babel/runtime/regenerator";var sleep=function(e){return new Promise((function(n){return setTimeout(n,e)}))};function Router(){var e=[],n=location.pathname,t=null,r=null,o=function(e,n){return e instanceof RegExp&&e.test(n)||"function"==typeof e&&e(n)||"string"==typeof e&&e===n},a=function(){for(var n=e.map((function(e){return e})),t=function e(){var t=n.shift();t&&t().then((function(){console.log("22"),e()})).catch((function(e){return console.error(e)}))},r=0;r<e.length;r++)t()};return window.addEventListener("popstate",a),{on:function(a,c,u,i){var s=function(){for(var n=function(){return Math.floor(Math.random()*e.length*1e3)},t=function(n){return e.find((function(e){return e.id===n}))},r=n();t(r);)r=n();return r}(),f={id:s,match:a,onEnter:c,onLeave:u,onBeforeEnter:i};return e.push(f),function(e){var a=e.match,c=e.onEnter,u=e.onLeave,i=e.onBeforeEnter;console.log("1");var s={currentPath:n,previousPath:t,state:history.state};o(a,n)&&c(s),u&&o(a,t)&&u(),i&&o(a,r)&&i(),console.log("onLeave","isMatch(match, previousPath)",o(a,t))}(f),function(){console.log("removed"),console.log("before",e),e=e.filter((function(e){return e.id!==s})),console.log("after",e),console.log("id",s)}},go:function(e,o){r=e,t=n,history.pushState(o,e,e),n=location.pathname,a(),console.log("url",e,"currentPath",n)}}}var createRender=function(e){return _asyncToGenerator(_regeneratorRuntime.mark((function n(){var t,r,o,a=arguments;return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("3",e),document.getElementById("root").innerHTML="Loading...",n.next=4,sleep(1e3);case 4:for(t=a.length,r=new Array(t),o=0;o<t;o++)r[o]=a[o];document.getElementById("root").innerHTML="<h2>".concat(JSON.stringify(r),"</h2>");case 6:case"end":return n.stop()}}),n)})))},createAsincRender=function(e){return function(){document.getElementById("root").innerHTML="<h2>on ".concat(e," location is </h2>")}},router=Router(),unsubscribe=router.on(/.*/,createAsincRender("/.*"));router.on((function(e){return"/contacts"===e}),createRender("/contacts")),router.on("/about",createAsincRender("/about"),createAsincRender("/about"),createAsincRender("/about")),router.on("/about/us",createAsincRender("/about/us")),document.body.addEventListener("click",(function(e){if(e.target.matches("a")){e.preventDefault();var n=e.target.getAttribute("href"),t=Math.random();router.go(n,t)}}));